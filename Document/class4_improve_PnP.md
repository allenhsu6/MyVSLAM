## 改进SLAM系统

在上一讲中，我们实现了帧帧之间的里程计。无论是速度还是精度，效果都不够理想。

出现这种情况的**原因**有：

1. 位姿估计的时候，我们使用RanSAC求出的PnP解。其中RanSAC只是少量的随机点来计算PnP，虽然能够确定inlier，但是方法太容易受到噪声影响。 

2. RGBD相机的深度图存在误差，尤其是深度过近或过远的地方。而且特征点提取的往往是角点，深度通常是不准确的。
3. 只使用帧间的匹配，导致结果太依赖参考帧，如果参考帧位姿估计不准确，会出现明显漂移。同时，这种做法没有充分利用全部信息。

4. 通过对时间的统计，发现在大部分时间浪费在提取特征点与特征点上。

对应的**解决办法**：

1. 使用RANSAC解作为初始值，然后使用非线性优化求最优值。
2. 非线性优化过程中，同时将特征点一起优化。
3. 使用frame-map的匹配，同时优化地图点。
4. 使用光流/直接法做前端，减少运算量。

总得来说就是BA必须引进来。



### PnP优化

本课，主要集中在第一块，面向PnP的优化。



